<% layout('layout/boilerplate') -%>
<script crossorigin="anonymous" src='https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.js' ></script>
<link crossorigin="anonymous" href='https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.css' rel='stylesheet' />
<div id='clusterMap' class="mb-3">
</div>
<div class="container">
    <div class="row justify-content-center mb-3">
        <h1>All CampGrounds</h1>
        <div>
            <a href="/campgrounds/new">Add Campgrounds</a>
        </div>
        <% for(campground of campgrounds){%>
            <!-- <li><a href=><</a></li> -->
            <div class="card mb-3 p-1">
                <div class="row">
                    <div class="col-md-4">
                        <img crossorigin="anonymous" src="<%=campground.image[0].url%>" class="card-img" alt="..." >
                    </div>
                    <div class="col-md-8">
                        <div class="card-body">
                          <h5 class="card-title"><%=campground.title%></h5>
                          <p class="card-text"><%=campground.description%></p>
                          <p class="card-text">
                            <small class="text-white-50"><%=campground.location%></small>
                          </p>
                          <a href="/campgrounds/<%=campground._id%>" class="btn btn-primary">View <%=campground.title%></a>
                        </div>
                    </div>
                </div>
              </div>       
            
        <% } %>    
</div>
        <script>
            const token = '<%-process.env.MAPBOX_TOKEN%>';
            const campgrounds = {features:<%-JSON.stringify(campgrounds)%>};
        </script>
        <script src="/javascript/clusterMap.js"></script>